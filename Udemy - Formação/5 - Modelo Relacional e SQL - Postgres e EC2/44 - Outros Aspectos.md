44. Outros Aspectos
Alguns aspectos de bancos de dados relacionais que são comuns aos bancos de dados relacionais que a gente não cobriu até agora.
O primeiro são as questões da programação, então os bancos de dados relacionais, eles possuem na sua maioria, a possibilidade de você executar programação, de você criar código de programação. Esses códigos, esses blocos de programação são três tipos principais Stored procedures, as functions e as triggers.
●	Stored procedures são bons blocos de programação, como uma linguagem de programação qualquer. Existe inclusive sistemas, programas, softwares, por exemplo, ERP, que tem parte da lógica de negócio dentro do banco de dados através da Stored procedures. Isso tem algumas vantagens, traz algumas vantagens. Claro que traz desvantagens também, mas traz diversos benefícios. Então, Stored procedures são blocos de código de programação.
●	Functions são semelhantes a Stored procedures, porém elas retornam um valor. Elas têm a função de retornar algum valor para quem chamou a função.
●	Triggers são código de programação peculiar, porque elas são disparadas normalmente quando ocorre algum evento com uma tabela. Então, por exemplo, quando dados são inseridos, são alterados ou são excluídos a trigger, ela é disparada. Então, por exemplo, o uso muito comum de triggers é para controlar processos de auditoria, para criar processos de auditoria, para registar, por exemplo, alterações feitas em tabelas.Então você, um usuário, faz uma alteração em uma tabela você quer ter um registro, uma auditoria, um log disso, você pode gerenciar isso através de uma trigger.

Bancos de dados relacionais também têm diversas funções características relacionadas a segurança então isso pode ser definido de forma bem granular. Normalmente, você pode especificar os requisitos de segurança a nível de tabela, a nível de coluna e até a nível de linha. Então os bancos de dados relacionais permite que isso seja configurado.

Você pode criar usuários, atribuir permissões a usuários. Você pode criar grupos, definir permissões para os grupos e vincular os usuários a grupos. Essa é a forma mais comum que se usa o gerenciamento de permissões e privilégios em bancos de dados. Então você cria grupos, por exemplo, um grupo aqui, nesse exemplo que a gente está vendo um grupo contável, você diz lá algumas funções que esse grupo pode atribuir, a quais membros esse grupo pertence e depois você pode vincular os usuários a esse grupo.

Existem comandos SQL, por exemplo, que o Grant, que vai dar privilégios, por exemplo, de executar um Select, um update. Na tabela locação para o Grupo Cloudera, por exemplo, é que você está removendo um privilégio que anteriormente tinha sido dado a um determinado grupo. Outra característica que bancos de dados relacionais e armazéns de dados têm são as views. Inclusive a gente vai em aulas posteriores criar algumas views, então a view é uma forma de você abstrair a complexidade do banco de dados.

Então imagine, por exemplo, o nosso banco de dados que nós estávamos usando aqui durante o nosso curso. Ele é composto por várias tabelas e essas tabelas elas têm a informação desnormalizada.
Então, por exemplo, se você quer ver as vendas com o nome do cliente, com o nome do produto e com o nome do vendedor, você vai ter que fazer aí pelo menos 4 junções.Você vai ter que construir uma consulta SQL bastante complexa.
Com a view, você consegue abstrair isso do usuário final, você consegue criar uma view venda, você cria a view já com esse select todo para o usuário, ele vai fazer simplesmente um select asteriscos from vendas e a view internamente vai fazer junções com clientes, com vendedores e com produtos, é claro você ainda pode definir filtros, por exemplo para um usuário, ele vê apenas os vendedores de um determinado vendedor ou de onde um determinado cliente ou de determinado estado.

Então nós vimos elas têm essa função. Uma view normal, uma view simples. Ela é simplesmente um alias, uma abstração de várias tabelas, de forma que você não precisa criar digitá la todo o código SQL. 

Existe também a questão das views materializadas as views materializadas, elas criam fisicamente os dados, elas armazenam fisicamente o resultado da view, então elas trazem algumas vantagens materializadas. Uma das vantagens é que você tem já o resultado da sua consulta de forma física. Então, quando você consultar, você vai ter um retorno dessa consulta mais rápido, porque o banco de dados não vai ter que fazer todas as funções, porém, a view como desvantagem, ela vai ocupar espaço em disco, obviamente, e ela precisa ter algum mecanismo para ser atualizado, uma vez que as tabelas que ela referencia vão sofrendo alterações.

E o último quesito que a gente precisa esclarecer e detalhar um pouquinho mais é a questão da integridade referencial. Então, a gente viu lá a questão das chaves primárias, chave estrangeiras;  a chave primária, chave estrangeira e, em princípio, ela apenas uma referência, uma linha, uma indicação, a chave primária.
Chave estrangeira por si só, ela não significa a integridade referencial, a integridade referencial é um mecanismo do banco de dados que pode ser definido de diversas formas.

Então, por exemplo, imagina que você quer escolher um produto que já teve vendas. Você tem um produto cadastrado, você quer excluir ele, mas já houveram vendas com esse produto. 
O que vai acontecer aqui? No Itens Venda você tem o identificador do produto. Se você exclui o produto, você fica apenas com identificador. Você não sabe mais que produto e qual é o preço. Então, os bancos de dados relacionais existem mecanismos que impedem, por exemplo, uma das que ele tem impedir que um produto seja excluído.
Se existe vendas com ele, existem várias formas que a integridade referencial funciona. Ela pode impedir que o produto seja excluído. Ela pode definir que o valor seja definido como default em caso de exclusão.

O filho é definido como default e pode ser definido como null, ou pode também definir uma deleção em cascata, a deleção em cascata é quando você exclui o pai e todos os filhos relacionados são excluídos automaticamente em cascata. Então esta é uma característica presente em todos os bancos de dados relacionais e que a gente vai ver la nos bancos de dados NoSQL, que uma das características deles é que eles têm a questão embora eles possuam, eles possam ter mecanismos de integridade referencial. Essa integridade referencial é relaxado que ela não é tão restrita como é, como ela está presente nos bancos de dados relacionais.
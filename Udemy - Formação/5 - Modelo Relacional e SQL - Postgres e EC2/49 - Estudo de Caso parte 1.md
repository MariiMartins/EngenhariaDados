49. Estudo de Caso Parte I
Então nós estamos próximos de iniciar a implementação do caso prático de um sistema, de um modelo de um banco de dados relacional que é da loja de vendas de bicicleta que a gente já falou brevemente.
Então, a gente vai ver nessa seção como construir um banco de dados transacional.
Na próxima sessão, a gente vai construir um armazém de dados para que o administrador da área de bike possa compreender o seu negócio. Então, são uma seção transacional transacional, com banco de dados relacional e uma seção com banco de dados analítico, que é a próxima sessão que vai ser, que vai utilizar a mesma infraestrutura, a mesma máquina virtual e o mesmo sistema gerenciador de banco de dados.
Então, o que a gente vai usar? A gente vai usar o PostgreSQL, que é um banco de dados relacional opensource que existe em vários bancos de dados relacionais opensource. Eu escolhi usar e aplicar aqui o caso prático com esse com o PostgreSQL é um dos mais os mais populares e mais amigáveis.
O modelo relacional que nós vamos criar você já conheceNós já falamos sobre ele. É ele que a gente vai construir a estrutura. E nesse modelo que a gente vai propor lá dados que a gente vai executar, as consultas, o modelo, este modelo que a gente viu no slide anterior, ele foi criado com essa ferramenta aqui, que é o www.draw.io e o último arquivo está disponível para download e diagramação.
Então você pode baixar esse diagrama. Você pode abrir. Com esta ferramenta, você pode alterar e criar outra ferramenta. O importante que você tem no arquivo que você vai baixar são os scripts. Então a gente tem sete scripts.
O primeiro script é o cliente Table, que vai criar a estrutura do banco de dados relacional.
O segundo é o Insert Clientes, que vai inserir os clientes.
O terceiro vai inserir os produtos do nosso banco de dados, depois os vendedores, depois as vendas, depois os itens de venda. Então é importante a estrutura do banco de dados é criada aqui. Daqui até aqui nós temos. Até aqui nós temos a inserção dos dados transacionais.
E depois nós temos uma última, o último script, que é um script interativo. Esse script interativo nós não vamos carregar para o console executar. Nós vamos executar consulta por consulta, então eu vou digitar os comandos e executar desse último esse último script, explicando que cada um faz.
Mas por que eu estou fornecendo o script? Se você quiser, tira dúvidas. Ou se você quiser fazer operações de copiar e colar que eu não recomendo. Acho legal que você digite pra você pegar/aprender a sintaxe e familiarizar com a sintaxe.
Mas mesmo assim, eu forneço menos. Se você precisar do script, pronto, você pode baixar esse arquivo. Você encontra também nesse arquivo compactado uma planilha dados ponto xlsx.
Esta planilha não é utilizada no curso, é apenas para consulta e a partir dessa planilha que foram gerados todos os dados que são inseridos no banco de dados, ok, então ela existe lá só pra consulta.
Bom, o que a gente tem nesses scripts que nós vamos executar? É importante a gente ressaltar aqui. Eu vou voltar aqui um pouquinho que o script de uma ate 6 nós não vamos abrir e executar linha linha. A gente apenas vai carregar e executar. Então, lá no ambiente virtual, na máquina virtual, você não vai ver o script. Então é bom você entender o que ele faz aqui na aula ou depois você abre o script.
O único que a gente vai executar passo a passo é o script sete. Ok, então vamos lá.
O primeiro script é o cliente table.
O que ele faz? Primeiro, ele define aqui o estilo da da coluna de data. A gente passa para o modelo europeu, que é aquele modelo que a gente usa, que é o do dia a dia, mês, mês, ano, ano, ano. Esse não é o modelo padrão que vem no postgree, então a gente altera já ele.
Depois a gente cria o schema relacional, certo? E depois do schema relacional, a gente começa a criação das tabelas. Então a gente vai criar, por exemplo, a tabela relacional, o vendedor e antes aqui a gente está criando uma sequência. Essa sequência é usada para criar os dados de alto incremento, por exemplo, aqui dos vendedores. Certo Então, a gente cria sequência, tabela, sequência, tabela. Então, aqui o script continua. Eu não estou mostrando todo, mas aqui a gente cria todas as cinco tabelas que são usadas no nosso banco de dados relacional.
O segundo script, com as tabelas já criadas, a gente começa a inserir dados, certo? Então, aqui também o script é parcial, mas o que a gente está fazendo está incluindo. Cliente o cliente dentro do nosso modelo relacional.
Depois, a mesma coisa.
A gente faz a inserção dos produtos no esquema relacional, produtos, produto e preço, os valores, os values, que é o nome do produto e o preço. Então a gente insere. Todos os produtos não estão aparecendo aqui todos, depois a mesma coisa.
Vendedores têm o nome, a coluna, o nome e o valor como o nome. O identificador dele é criado automaticamente, então a gente não precisa inserir. Depois a gente faz a inserção das vendas. Então tenho ideia do vendedor e do cliente, a data da venda e o total da venda.
Então, vejam aqui. Aqui a gente tem a coluna de data que a gente precisou mudar lá, o formato da data. Então, a gente faz a inserção aqui de todas as vendas e depois a gente tem a nossa tabela aí pra ele, que faz a relação entre a venda e o produto que foi vendido. Então, itens, venda.
Eu tenho ID do produto e da venda, a quantidade, o valor unitário, o valor total, o desconto. E aqui estão os valores. Então, assim a gente tem penúltimo script e o último script ele é interativo. Como eu falei, esse script a gente vai rodar ele com o caso a caso, consulta por consulta para analisar o resultado.
Então, primeiro a primeira consulta, a gente vai fazer um select asteriscos que foram relacionar o clientes. A gente vai começar a ver os dados que nós inserimos no banco de dados que nós acabamos de criar.
A gente vai conhecer os dados e a estrutura desse banco de dados.